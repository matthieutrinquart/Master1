CREATE SCHEMA CTRL3_cooperative;
  
set search_path = CTRL3_cooperative ;

-- --------------------------------------------------------

-- 
-- Structure de la table 'CEREALE'
-- 



CREATE TABLE CEREALE (
  CODECEREALE char(5) NOT NULL,
  VARIETE char(30) default NULL,
  PRIMARY KEY  (CODECEREALE)
) ;

-- 
-- Contenu de la table 'CEREALE'
-- 

INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('BL500', ' Blé NTR 500');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('BL775', ' Blé NM 77');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('BL778', ' Blé NM 77 spécial');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('CZ120', ' Colza NTR 120');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('CZ130', ' Colza NTR 130');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('MS440', ' Maïs NM 44');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('MS450', ' Maïs NM 45');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('OR180', ' Orge FG 40/75');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('OR200', ' Orge NM 20');
INSERT INTO CEREALE (CODECEREALE, VARIETE) VALUES ('SG010', ' Sorgho EZB 2');

-- --------------------------------------------------------

-- 
-- Structure de la table 'CONTRAT'
-- 

CREATE TABLE CONTRAT (
  NOCONTRAT int NOT NULL,
  CODECEREALE char(5) NOT NULL,
  NO_NEGOCIANT int NOT NULL,
  DATECONTRAT date default NULL,
  QTECDE int default NULL,
  PRIMARY KEY  (NOCONTRAT)
) ;

-- 
-- Contenu de la table 'CONTRAT'
-- 

INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1477, 'BL500', 45, '2002-01-12', 70);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1478, 'OR180', 42, '2002-02-16', 45);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1479, 'SG010', 50, '2002-02-18', 50);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1480, 'SG010', 43, '2002-02-22', 50);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1481, 'MS450', 50, '2002-03-02', 200);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1482, 'OR180', 51, '2002-03-16', 75);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1483, 'CZ120', 55, '2002-04-18', 310);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1484, 'CZ130', 42, '2002-05-15', 50);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1485, 'CZ120', 54, '2002-06-03', 55);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1486, 'BL775', 41, '2002-06-06', 120);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1487, 'OR200', 44, '2002-06-08', 55);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1488, 'OR180', 48, '2002-07-16', 135);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1489, 'OR200', 50, '2002-08-11', 100);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1490, 'BL500', 41, '2002-08-16', 160);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1491, 'BL500', 47, '2002-08-17', 50);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1492, 'BL500', 46, '2002-08-18', 120);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1493, 'BL500', 49, '2002-09-10', 205);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1494, 'BL500', 45, '2002-09-16', 110);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1495, 'CZ120', 42, '2002-09-22', 50);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1496, 'OR180', 47, '2002-10-28', 70);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1497, 'SG010', 50, '2002-10-28', 45);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1498, 'BL500', 42, '2002-11-16', 180);
INSERT INTO CONTRAT (NOCONTRAT, CODECEREALE, NO_NEGOCIANT, DATECONTRAT, QTECDE) VALUES (1499, 'BL500', 48, '2002-12-06', 175);

-- --------------------------------------------------------

-- 
-- Structure de la table 'LIVRER'
-- 

CREATE TABLE LIVRER (
  NOCONTRAT int NOT NULL,
  DATELIV timestamp NOT NULL,
  QTELIV int default NULL,
  PRIMARY KEY  (NOCONTRAT,DATELIV,QTELIV)
);

-- 
-- Contenu de la table 'LIVRER'
-- 
INSERT INTO livrer VALUES (1477, '2002-01-20', 45);
INSERT INTO livrer VALUES (1477, '2002-01-22', 25);
INSERT INTO livrer VALUES (1479, '2002-02-25', 50);
INSERT INTO livrer VALUES (1480, '2002-02-22', 25);
INSERT INTO livrer VALUES (1480, '2002-03-30', 25);
INSERT INTO livrer VALUES (1482, '2002-03-26', 75);
INSERT INTO livrer VALUES (1483, '2002-04-22', 100);
INSERT INTO livrer VALUES (1483, '2002-04-25', 110);
INSERT INTO livrer VALUES (1483, '2002-05-16', 100);
INSERT INTO livrer VALUES (1484, '2002-05-25', 25);
INSERT INTO livrer VALUES (1484, '2002-05-30', 25);
INSERT INTO livrer VALUES (1485, '2002-06-20', 55);
INSERT INTO livrer VALUES (1486, '2002-06-16', 45);
INSERT INTO livrer VALUES (1486, '2002-06-26', 75);
INSERT INTO livrer VALUES (1487, '2002-06-20', 55);
INSERT INTO livrer VALUES (1488, '2002-07-16', 45);
INSERT INTO livrer VALUES (1488, '2002-07-31', 45);
INSERT INTO livrer VALUES (1488, '2002-08-14', 45);
INSERT INTO livrer VALUES (1489, '2002-08-11', 100);
INSERT INTO livrer VALUES (1490, '2002-08-01', 80);
INSERT INTO livrer VALUES (1490, '2002-09-14', 80);
INSERT INTO livrer VALUES (1491, '2002-08-17', 50);
INSERT INTO livrer VALUES (1492, '2002-08-25', 120);
INSERT INTO livrer VALUES (1493, '2002-09-15', 75);
INSERT INTO livrer VALUES (1493, '2002-09-30', 80);
INSERT INTO livrer VALUES (1493, '2002-10-05', 50);
INSERT INTO livrer VALUES (1494, '2002-10-16', 35);
INSERT INTO livrer VALUES (1494, '2002-10-30', 75);
INSERT INTO livrer VALUES (1495, '2002-09-28', 50);
INSERT INTO livrer VALUES (1496, '2002-11-05', 35);
INSERT INTO livrer VALUES (1496, '2002-11-25', 35);
INSERT INTO livrer VALUES (1497, '2002-11-10', 45);
INSERT INTO livrer VALUES (1498, '2002-11-26', 80);
INSERT INTO livrer VALUES (1499, '2002-12-16', 75);
INSERT INTO livrer VALUES (1499, '2102-12-20', 100);
INSERT INTO livrer VALUES (1478, '2002-02-20', 10);
INSERT INTO livrer VALUES (1478, '2002-02-28', 10);
INSERT INTO livrer VALUES (1478, '2002-03-03', 10);
INSERT INTO livrer VALUES (1481, '2002-03-12', 80);
INSERT INTO livrer VALUES (1481, '2002-03-25', 80);

-- --------------------------------------------------------

-- 
-- Structure de la table 'NEGOCIANT'
-- 

CREATE TABLE NEGOCIANT (
  NO_NEGOCIANT int NOT NULL,
  NOM_NEGOCIANT char(50) default NULL,
  ADR_NEGOCIANT char(50) default NULL,
  CP_NEGOCIANT decimal(5,0) default NULL,
  VILLE_NEGOCIANT char(30) default NULL,
  PRIMARY KEY  (NO_NEGOCIANT)
) ;

-- 
-- Contenu de la table 'NEGOCIANT'
-- 

INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (41, 'Mathieu', '4, allée des blés', '77120', 'Melun');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (42, 'Bertolo', '52 ferme de sucy', '89200', 'Sens');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (43, 'Pacci', '1024, chemin rouge', '13080', 'Luynes');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (44, 'Ruiz', '1, rue grande', '69000', 'Lyon');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (45, 'Weiss', '2, bd des granges', '84100', 'Avignon');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (46, 'Geoffroy', '6, route de Paris', '91000', 'Corbeille');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (47, 'Perrey', '85, rue belle', '89000', 'Auxerre');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (48, 'Pillot', '5633, av des belges', '13100', 'Aix');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (49, 'Stein', '652, route ronde', '83000', 'St Maximun');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (50, 'Vautrin', '987, bd des vins', '84520', 'Gigondas');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (51, 'Bertrand', '85, rue belle', '85000', 'La Rochelle');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (52, 'Tessier', '562, bd rene', '13000', 'Marseilles');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (53, 'Aubry', '145, av des fleurs', '13250', 'Trets');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (54, 'Kanter', '1, chemin noir', '30000', 'Nimes');
INSERT INTO NEGOCIANT (NO_NEGOCIANT, NOM_NEGOCIANT, ADR_NEGOCIANT, CP_NEGOCIANT, VILLE_NEGOCIANT) VALUES (55, 'Cordier', '2, grande route', '30250', 'Uzes');

-- --------------------------------------------------------

-- 
-- Structure de la table 'SILO'
-- 

CREATE TABLE SILO (
    codesilo character(2) NOT NULL,
    codecereale character(5) NOT NULL,
    qtestock integer,
    qtemax integer DEFAULT 700
);



--
-- Data for Name: silo; Type: TABLE DATA; Schema: cooperative; Owner: carmignac.l
--

INSERT INTO SILO VALUES ('A ', 'BL500', 580, 700);
INSERT INTO SILO VALUES ('F ', 'MS450', 456, 700);
INSERT INTO SILO VALUES ('G ', 'CZ120', 478, 700);
INSERT INTO SILO VALUES ('H ', 'CZ130', 471, 700);
INSERT INTO SILO VALUES ('J ', 'SG010', 95, 700);
INSERT INTO SILO VALUES ('B ', 'OR180', 120, 500);
INSERT INTO SILO VALUES ('C ', 'OR180', 255, 450);
INSERT INTO SILO VALUES ('I ', 'CZ120', 78, 400);
INSERT INTO SILO VALUES ('D ', 'MS440', 608, 700);
INSERT INTO SILO VALUES ('E ', 'MS440', 48, 500);

-- 
-- Contraintes pour les tables exportées
-- 

-- 
-- Contraintes pour la table `CONTRAT`
-- 
ALTER TABLE CONTRAT
  ADD CONSTRAINT FK_contrat_neg FOREIGN KEY (NO_NEGOCIANT) REFERENCES NEGOCIANT (NO_NEGOCIANT),
  ADD CONSTRAINT FK_contrat_cerale FOREIGN KEY (CODECEREALE) REFERENCES CEREALE (CODECEREALE);
-- 
-- Contraintes pour la table `LIVRER`
-- 
ALTER TABLE LIVRER
  ADD CONSTRAINT FK_liv_contrat FOREIGN KEY (NOCONTRAT) REFERENCES CONTRAT (NOCONTRAT);

-- Contraintes pour la table `SILO`
-- 
ALTER TABLE SILO
  ADD CONSTRAINT FK_cereale FOREIGN KEY (CODECEREALE) REFERENCES CEREALE (CODECEREALE);
  

